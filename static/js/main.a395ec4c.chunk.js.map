{"version":3,"sources":["Components/Loader/Loader.module.css","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/Modal/Modal.js","utils/ServiceApi.js","Components/App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","alert","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","url","toggleModal","handleSetLargeImageURL","largeImageURL","src","alt","onClick","e","ImageGallery","hits","map","id","webformatURL","Button","Loader","s","loader_container","color","height","width","timeout","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","getImagesAPI","nextQuery","page","fetch","then","r","ok","json","Promise","reject","Error","App","error","status","showModal","totalHits","getImages","data","length","prevState","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleLoadMore","handleFormSubmit","prevProps","prevQuery","console","log","message","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a395ec4c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader_container\":\"Loader_loader_container__2XV7F\"};","import React, { Component } from 'react';\r\n\r\nclass Searchbar extends Component {\r\n  state = { query: '' };\r\n\r\n  handleNameChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    if (this.state.query.trim() === '') {\r\n      alert('Enter your request');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","const ImageGalleryItem = ({\r\n  url,\r\n  toggleModal,\r\n  handleSetLargeImageURL,\r\n  largeImageURL,\r\n}) => {\r\n  const handleClick = e => {\r\n    toggleModal();\r\n    handleSetLargeImageURL(largeImageURL);\r\n  };\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={url}\r\n        alt=\"\"\r\n        className=\"ImageGalleryItem-image\"\r\n        onClick={handleClick}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ hits, toggleModal, handleSetLargeImageURL }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {hits.map(({ id, webformatURL, largeImageURL }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          url={webformatURL}\r\n          toggleModal={toggleModal}\r\n          largeImageURL={largeImageURL}\r\n          handleSetLargeImageURL={handleSetLargeImageURL}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","const Button = ({ onClick }) => {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import L from 'react-loader-spinner';\r\nimport s from './Loader.module.css';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className={s.loader_container}>\r\n      <L\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","const API_KEY = '22954093-157d8252386abbab9843eb1e8';\r\n\r\nexport const getImagesAPI = ({ nextQuery, page }) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${nextQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(r => {\r\n    if (r.ok) {\r\n      return r.json();\r\n    }\r\n    return Promise.reject(\r\n      new Error(`по запросу ${nextQuery} ничего не найдено`),\r\n    );\r\n  });\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nimport Searchbar from './Searchbar/Searchbar';\r\nimport ImageGallery from './ImageGallery/ImageGallery';\r\nimport Button from './Button/Button';\r\nimport Loader from './Loader/Loader';\r\nimport Modal from './Modal/Modal';\r\nimport { getImagesAPI } from '../utils/ServiceApi';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    query: '',\r\n    hits: [],\r\n    page: 1,\r\n    error: null,\r\n    status: 'idle',\r\n    showModal: false,\r\n    largeImageURL: '',\r\n    totalHits: 0,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevState.query;\r\n    const nextQuery = this.state.query;\r\n    const page = this.state.page;\r\n\r\n    if (nextQuery !== prevQuery) {\r\n      this.setState({ status: 'pending' });\r\n      this.setState({ page: 1, hits: [] });\r\n      console.log(page);\r\n      this.getImages({ nextQuery: nextQuery, page: 1 });\r\n    }\r\n\r\n    if (page !== prevState.page && page !== 1) {\r\n      this.setState({ status: 'pending' });\r\n      console.log('load more click');\r\n      this.getImages({ nextQuery: nextQuery, page: page });\r\n    }\r\n  }\r\n\r\n  getImages = ({ nextQuery, page }) => {\r\n    getImagesAPI({ nextQuery, page })\r\n      .then(data => {\r\n        if (data.hits.length === 0) {\r\n          this.setState({ status: 'rejected' });\r\n        }\r\n        this.setState({ status: 'resolved', totalHits: data.totalHits });\r\n        this.setState(prevState => ({\r\n          hits: [...prevState.hits, ...data.hits],\r\n        }));\r\n      })\r\n      .catch(error => this.setState({ error, status: 'rejected' }))\r\n      .finally(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n  };\r\n\r\n  handleLoadMore = e => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  handleFormSubmit = query => {\r\n    this.setState({ query });\r\n  };\r\n\r\n  handleSetLargeImageURL = largeImageURL => {\r\n    this.setState({ largeImageURL });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n  };\r\n\r\n  render() {\r\n    const { status, error, hits, query, showModal, largeImageURL, totalHits } =\r\n      this.state;\r\n\r\n    if (status === 'idle') {\r\n      return <Searchbar onSubmit={this.handleFormSubmit} />;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          <Loader />\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          {error && <h1>{error.message}</h1>}\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          <ImageGallery\r\n            hits={hits}\r\n            toggleModal={this.toggleModal}\r\n            handleSetLargeImageURL={this.handleSetLargeImageURL}\r\n          />\r\n          {hits.length >= 12 && hits.length < totalHits && (\r\n            <Button onClick={this.handleLoadMore} />\r\n          )}\r\n          {hits.length === 0 && <h1>по запросу {query} ничего не найдено</h1>}\r\n\r\n          {showModal && (\r\n            <Modal onClose={this.toggleModal}>\r\n              <img src={largeImageURL} alt=\"\" />\r\n            </Modal>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}