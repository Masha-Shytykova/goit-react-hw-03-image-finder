{"version":3,"sources":["Components/Loader/Loader.module.css","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/Modal/Modal.js","utils/ServiceApi.js","Components/App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","alert","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","url","tags","toggleModal","handleSetLargeImageURL","largeImageURL","src","alt","onClick","e","ImageGallery","hits","map","id","webformatURL","Button","Loader","s","loader_container","color","height","width","timeout","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","getImagesAPI","nextQuery","page","fetch","then","r","ok","json","Promise","reject","Error","App","error","status","showModal","totalHits","getImages","data","length","prevState","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleLoadMore","handleFormSubmit","prevProps","prevQuery","message","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5d5fe91b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader_container\":\"Loader_loader_container__2XV7F\"};","import React, { Component } from 'react';\r\n\r\nclass Searchbar extends Component {\r\n  state = { query: '' };\r\n\r\n  handleNameChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    if (this.state.query.trim() === '') {\r\n      alert('Enter your request');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","const ImageGalleryItem = ({\r\n  url,\r\n  tags,\r\n  toggleModal,\r\n  handleSetLargeImageURL,\r\n  largeImageURL,\r\n}) => {\r\n  const handleClick = e => {\r\n    toggleModal();\r\n    handleSetLargeImageURL({ largeImageURL, tags });\r\n  };\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={url}\r\n        alt={tags}\r\n        className=\"ImageGalleryItem-image\"\r\n        onClick={handleClick}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ hits, toggleModal, handleSetLargeImageURL }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {hits.map(({ id, webformatURL, largeImageURL, tags }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          url={webformatURL}\r\n          tags={tags}\r\n          toggleModal={toggleModal}\r\n          largeImageURL={largeImageURL}\r\n          handleSetLargeImageURL={handleSetLargeImageURL}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","const Button = ({ onClick }) => {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import L from 'react-loader-spinner';\r\nimport s from './Loader.module.css';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className={s.loader_container}>\r\n      <L\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","const API_KEY = '22954093-157d8252386abbab9843eb1e8';\r\n\r\nexport const getImagesAPI = ({ nextQuery, page }) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${nextQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(r => {\r\n    if (r.ok) {\r\n      return r.json();\r\n    }\r\n    return Promise.reject(\r\n      new Error(`по запросу ${nextQuery} ничего не найдено`),\r\n    );\r\n  });\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nimport Searchbar from './Searchbar/Searchbar';\r\nimport ImageGallery from './ImageGallery/ImageGallery';\r\nimport Button from './Button/Button';\r\nimport Loader from './Loader/Loader';\r\nimport Modal from './Modal/Modal';\r\nimport { getImagesAPI } from '../utils/ServiceApi';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    query: '',\r\n    hits: [],\r\n    page: 1,\r\n    error: null,\r\n    status: 'idle',\r\n    showModal: false,\r\n    largeImageURL: '',\r\n    tags: '',\r\n    totalHits: 0,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevState.query;\r\n    const nextQuery = this.state.query;\r\n    const page = this.state.page;\r\n\r\n    if (nextQuery !== prevQuery) {\r\n      this.setState({ status: 'pending' });\r\n      this.setState({ page: 1, hits: [] });\r\n      this.getImages({ nextQuery: nextQuery, page: 1 });\r\n    }\r\n\r\n    if (page !== prevState.page && page !== 1) {\r\n      this.setState({ status: 'pending' });\r\n      this.getImages({ nextQuery: nextQuery, page: page });\r\n    }\r\n  }\r\n\r\n  getImages = ({ nextQuery, page }) => {\r\n    getImagesAPI({ nextQuery, page })\r\n      .then(data => {\r\n        if (data.hits.length === 0) {\r\n          this.setState({ status: 'rejected' });\r\n        }\r\n        this.setState({ status: 'resolved', totalHits: data.totalHits });\r\n\r\n        this.setState(prevState => ({\r\n          hits: [...prevState.hits, ...data.hits],\r\n        }));\r\n      })\r\n      .catch(error => this.setState({ error, status: 'rejected' }))\r\n      .finally(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n  };\r\n\r\n  handleLoadMore = e => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  handleFormSubmit = query => {\r\n    this.setState({ query });\r\n  };\r\n\r\n  handleSetLargeImageURL = ({ largeImageURL, tags }) => {\r\n    this.setState({ largeImageURL, tags });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      status,\r\n      error,\r\n      hits,\r\n      query,\r\n      showModal,\r\n      largeImageURL,\r\n      totalHits,\r\n      tags,\r\n    } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return <Searchbar onSubmit={this.handleFormSubmit} />;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          <Loader />\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          {error && <h1>{error.message}</h1>}\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <Searchbar onSubmit={this.handleFormSubmit} />\r\n          <ImageGallery\r\n            hits={hits}\r\n            toggleModal={this.toggleModal}\r\n            handleSetLargeImageURL={this.handleSetLargeImageURL}\r\n          />\r\n          {hits.length >= 12 && hits.length < totalHits && (\r\n            <Button onClick={this.handleLoadMore} />\r\n          )}\r\n          {hits.length === 0 && <h1>по запросу {query} ничего не найдено</h1>}\r\n\r\n          {showModal && (\r\n            <Modal onClose={this.toggleModal}>\r\n              <img src={largeImageURL} alt={tags} />\r\n            </Modal>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}